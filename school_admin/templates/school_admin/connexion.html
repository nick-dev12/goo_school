<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Connexion Goo-school</title>
  </head>
  {% load static %}
  <body>
    <link
      rel="stylesheet"
      href="{% static 'school_admin/css/connexion_admin.css' %}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />

    <div class="connexion-container">
      <div class="connexion-card">
        <div class="card-header">
          <div class="logo">
            <i class="fas fa-shield-alt"></i>
          </div>
          <h1>Connexion Goo-school</h1>
          <p>Accédez à votre espace Goo-school</p>
        </div>

        <div class="card-body">
          <!-- Messages Flash -->
          {% if messages %}
          <div class="messages-container">
            {% for message in messages %}
            <div
              class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}"
            >
              {% if message.tags == 'success' %}
              <i class="fas fa-check-circle"></i>
              {% elif message.tags == 'error' %}
              <i class="fas fa-exclamation-circle"></i>
              {% elif message.tags == 'warning' %}
              <i class="fas fa-exclamation-triangle"></i>
              {% else %}
              <i class="fas fa-info-circle"></i>
              {% endif %} {{ message }}
            </div>
            {% endfor %}
          </div>
          {% endif %}

          <form
            id="compte-user-login-form"
            method="post"
            action="{% url 'school_admin:connexion_compte_user' %}"
          >
            {% csrf_token %}

            <!-- Champ caché pour l'URL de redirection -->

            <div class="form-section">
              <div
                class="form-group {% if field_errors.email %}has-error{% endif %}"
              >
                <label for="mail">Email</label>
                <div class="input-container">
                  <i class="fas fa-user input-icon"></i>
                  <input
                    type="text"
                    id="mail"
                    name="email"
                    value="{{ form_data.email }}"
                    required
                  />
                </div>
                {% if field_errors.email %}
                <span class="error-message">{{ field_errors.email }}</span>
                {% endif %}
              </div>

              <div
                class="form-group {% if field_errors.password %}has-error{% endif %}"
              >
                <label for="password">Mot de passe</label>
                <div class="input-container">
                  <i class="fas fa-lock input-icon"></i>
                  <input
                    type="password"
                    id="password"
                    name="password"
                    required
                  />
                  <i class="fas fa-eye toggle-password"></i>
                </div>
                {% if field_errors.password %}
                <span class="error-message">{{ field_errors.password }}</span>
                {% endif %}
              </div>

              <div class="form-options">
                <div class="remember-me">
                  <input type="checkbox" id="remember" name="remember" />
                  <label for="remember">Se souvenir de moi</label>
                </div>
                <a href="#" class="forgot-password">Mot de passe oublié ?</a>
              </div>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn-primary">
                <i class="fas fa-sign-in-alt"></i> Se connecter
              </button>
            </div>
          </form>

          <div class="card-footer">
            <p>
              Nouveau sur la plateforme ?
              <a href="{% url 'school_admin:inscription_compte_user' %}"
                >Créer un compte</a
              >
            </p>
          </div>
        </div>
      </div>
    </div>

    <script src="{% static 'school_admin/js/connexion_admin.js' %}"></script>

    <style>
      /* Styles pour les messages flash */
      .messages-container {
        margin-bottom: 1.5rem;
      }

      .alert {
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 0.95rem;
      }

      .alert-success {
        background-color: #f0fdf4;
        color: #16a34a;
        border: 1px solid #bbf7d0;
      }

      .alert-error {
        background-color: #fef2f2;
        color: #dc2626;
        border: 1px solid #fecaca;
      }

      .alert-warning {
        background-color: #fffbea;
        color: #d97706;
        border: 1px solid #fde68a;
      }

      .alert-info {
        background-color: #eff6ff;
        color: #2563eb;
        border: 1px solid #bae6fd;
      }

      .alert i {
        font-size: 1.25rem;
      }

      /* Styles pour les erreurs de champs */
      .has-error .input-container {
        border-color: #dc2626 !important;
        background-color: #fef2f2;
      }

      .error-message {
        color: #dc2626;
        font-size: 0.85rem;
        margin-top: 0.25rem;
        display: block;
      }
    </style>
  </body>
</html>
