<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bienvenue à Goo-school</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  {% load static %}
  <body>
    <link
      rel="stylesheet"
      href="{% static 'school_admin/css/connexion_admin.css' %}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Background Pattern -->
    <div class="background-pattern">
      <div class="pattern-circle circle-1"></div>
      <div class="pattern-circle circle-2"></div>
      <div class="pattern-circle circle-3"></div>
      <div class="pattern-dots"></div>
    </div>

    <div class="connexion-container">
      <!-- Welcome Section -->
      <div class="welcome-section">
        <div class="welcome-content">
          <div class="school-logo">
            <div class="logo-container">
              <i class="fas fa-graduation-cap"></i>
              <div class="logo-glow"></div>
            </div>
          </div>
          <h1 class="welcome-title">
            Bienvenue à <span class="highlight">Goo-school</span>
          </h1>
          <p class="welcome-subtitle">Votre plateforme éducative complète</p>

          <!-- User Types -->
          <div class="user-types">
            <div class="user-type">
              <i class="fas fa-user-graduate"></i>
              <span>Élèves</span>
            </div>
            <div class="user-type">
              <i class="fas fa-users"></i>
              <span>Parents</span>
            </div>
            <div class="user-type">
              <i class="fas fa-chalkboard-teacher"></i>
              <span>Enseignants</span>
            </div>
            <div class="user-type">
              <i class="fas fa-user-tie"></i>
              <span>Administration</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Login Card -->
      <div class="connexion-card">
        <div class="card-header">
          <div class="header-icon">
            <i class="fas fa-sign-in-alt"></i>
          </div>
          <h2>Connexion</h2>
          <p>Accédez à votre espace personnel</p>
        </div>

        <div class="card-body">
          <!-- Messages Flash -->
          {% if messages %}
          <div class="messages-container">
            {% for message in messages %}
            <div
              class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}"
            >
              {% if message.tags == 'success' %}
              <i class="fas fa-check-circle"></i>
              {% elif message.tags == 'error' %}
              <i class="fas fa-exclamation-circle"></i>
              {% elif message.tags == 'warning' %}
              <i class="fas fa-exclamation-triangle"></i>
              {% else %}
              <i class="fas fa-info-circle"></i>
              {% endif %} {{ message }}
            </div>
            {% endfor %}
          </div>
          {% endif %}

          <form
            id="compte-user-login-form"
            method="post"
            action="{% url 'school_admin:connexion_compte_user' %}"
          >
            {% csrf_token %}

            <!-- Champ caché pour l'URL de redirection -->

            <div class="form-section">
              <div
                class="form-group {% if field_errors.email %}has-error{% endif %}"
              >
                <label for="mail">Email</label>
                <div class="input-container">
                  <i class="fas fa-user input-icon"></i>
                  <input
                    type="text"
                    id="mail"
                    name="email"
                    value="{{ form_data.email }}"
                    required
                  />
                </div>
                {% if field_errors.email %}
                <span class="error-message">{{ field_errors.email }}</span>
                {% endif %}
              </div>

              <div
                class="form-group {% if field_errors.password %}has-error{% endif %}"
              >
                <label for="password">Mot de passe</label>
                <div class="input-container">
                  <i class="fas fa-lock input-icon"></i>
                  <input
                    type="password"
                    id="password"
                    name="password"
                    required
                  />
                  <i class="fas fa-eye toggle-password"></i>
                </div>
                {% if field_errors.password %}
                <span class="error-message">{{ field_errors.password }}</span>
                {% endif %}
              </div>

              <div class="form-options">
                <div class="remember-me">
                  <input type="checkbox" id="remember" name="remember" />
                  <label for="remember">Se souvenir de moi</label>
                </div>
                <a href="#" class="forgot-password">Mot de passe oublié ?</a>
              </div>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn-primary">
                <i class="fas fa-sign-in-alt"></i> Se connecter
              </button>
            </div>
          </form>

          <div class="card-footer">
            <p>
              Nouveau sur la plateforme ?
              <a href="{% url 'school_admin:inscription_compte_user' %}"
                >Créer un compte</a
              >
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Floating Elements -->
    <div class="floating-elements">
      <div class="floating-icon icon-1">
        <i class="fas fa-book"></i>
      </div>
      <div class="floating-icon icon-2">
        <i class="fas fa-lightbulb"></i>
      </div>
      <div class="floating-icon icon-3">
        <i class="fas fa-trophy"></i>
      </div>
      <div class="floating-icon icon-4">
        <i class="fas fa-star"></i>
      </div>
    </div>

    <script src="{% static 'school_admin/js/connexion_admin.js' %}"></script>

    <style>
      /* Styles pour les messages flash */
      .messages-container {
        margin-bottom: 1.5rem;
      }

      .alert {
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 0.95rem;
      }

      .alert-success {
        background-color: #f0fdf4;
        color: #16a34a;
        border: 1px solid #bbf7d0;
      }

      .alert-error {
        background-color: #fef2f2;
        color: #dc2626;
        border: 1px solid #fecaca;
      }

      .alert-warning {
        background-color: #fffbea;
        color: #d97706;
        border: 1px solid #fde68a;
      }

      .alert-info {
        background-color: #eff6ff;
        color: #2563eb;
        border: 1px solid #bae6fd;
      }

      .alert i {
        font-size: 1.25rem;
      }

      /* Styles pour les erreurs de champs */
      .has-error .input-container {
        border-color: #dc2626 !important;
        background-color: #fef2f2;
      }

      .error-message {
        color: #dc2626;
        font-size: 0.85rem;
        margin-top: 0.25rem;
        display: block;
      }
    </style>
  </body>
</html>
