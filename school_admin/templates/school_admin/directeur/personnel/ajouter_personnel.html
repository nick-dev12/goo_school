<!DOCTYPE html>
{% load static %}
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajouter un Membre du Personnel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="{% static 'school_admin/css/directeur/ajouter_personnel.css' %}" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    {% include 'school_admin/directeur/partials/header_directeur.html' %}
    
    <!-- Main Content -->
    <div class="personnel-page-container">
        <div class="personnel-header-section">
            <div class="personnel-header-content">
                <div class="personnel-title-section">
                    <h1 class="personnel-main-title">
                        <i class="fas fa-user-plus"></i>
                        Ajouter un Membre du Personnel
                    </h1>
                    <p class="personnel-subtitle">
                        Remplissez les informations pour ajouter un nouveau membre à votre équipe administrative
                    </p>
                </div>
            </div>
        </div>

        <!-- Formulaire -->
        <div class="form-section-container">
            <!-- Messages Django -->
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                        <i class="fas fa-{% if message.tags == 'error' %}exclamation-triangle{% elif message.tags == 'success' %}check-circle{% else %}info-circle{% endif %}"></i>
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            {% endif %}
            
            {% if field_errors %}
                <div class="alert alert-danger">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>Erreurs détectées :</strong> Veuillez corriger les champs marqués en rouge.
                </div>
            {% endif %}
            
            <form method="post" class="personnel-form">
                    {% csrf_token %}
                    
                    <!-- Informations personnelles -->
                    <div class="form-section">
                        <div class="section-title">
                            <i class="fas fa-user"></i>
                            Informations Personnelles
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label" for="nom">Nom *</label>
                                    <input type="text" 
                                           class="form-control {% if field_errors.nom %}is-invalid{% endif %}" 
                                           id="nom" 
                                           name="nom" 
                                           value="{{ form_data.nom }}"
                                           required>
                                    {% if field_errors.nom %}
                                        <div class="invalid-feedback">{{ field_errors.nom }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label" for="prenom">Prénom *</label>
                                    <input type="text" 
                                           class="form-control {% if field_errors.prenom %}is-invalid{% endif %}" 
                                           id="prenom" 
                                           name="prenom" 
                                           value="{{ form_data.prenom }}"
                                           required>
                                    {% if field_errors.prenom %}
                                        <div class="invalid-feedback">{{ field_errors.prenom }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label" for="email">Email professionnel *</label>
                                    <input type="email" 
                                           class="form-control {% if field_errors.email %}is-invalid{% endif %}" 
                                           id="email" 
                                           name="email" 
                                           value="{{ form_data.email }}"
                                           required>
                                    {% if field_errors.email %}
                                        <div class="invalid-feedback">{{ field_errors.email }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label" for="telephone">Téléphone *</label>
                                    <input type="tel" 
                                           class="form-control {% if field_errors.telephone %}is-invalid{% endif %}" 
                                           id="telephone" 
                                           name="telephone" 
                                           value="{{ form_data.telephone }}"
                                           required>
                                    {% if field_errors.telephone %}
                                        <div class="invalid-feedback">{{ field_errors.telephone }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                           
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label" for="type_personnel">Type de fonction *</label>
                                    <select class="form-control {% if field_errors.fonction %}is-invalid{% endif %}" 
                                            id="fonction" 
                                            name="fonction" 
                                            required>
                                        <option value="">Sélectionnez un type</option>
                                        <option value="secretaire" {% if form_data.fonction == 'secretaire' %}selected{% endif %}>Secrétaire / Service de scolarité</option>
                                        <option value="surveillant_general" {% if form_data.fonction == 'surveillant_general' %}selected{% endif %}>Surveillant Général (SG)</option>
                                        <option value="censeur" {% if form_data.fonction == 'censeur' %}selected{% endif %}>Censeur</option>
                                        <option value="administrateur" {% if form_data.fonction == 'administrateur' %}selected{% endif %}>Administrateur</option>
                                    </select>
                                    {% if field_errors.fonction %}
                                        <div class="invalid-feedback">{{ field_errors.fonction }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                  
                    
                    <!-- Mot de passe -->
                    <div class="form-section">
                        <div class="section-title">
                            <i class="fas fa-lock"></i>
                            Sécurité
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label" for="password">Mot de passe provisoire*</label>
                                    <input type="password" 
                                           class="form-control {% if field_errors.password %}is-invalid{% endif %}" 
                                           id="password" 
                                           name="password" 
                                           required>
                                    {% if field_errors.password %}
                                        <div class="invalid-feedback">{{ field_errors.password }}</div>
                                    {% endif %}
                                    <small class="form-text text-muted">Minimum 8 caractères</small>
                                </div>
                            </div>
                           
                        </div>
                    </div>
                    
                <div class="form-actions">
                    <a href="{% url 'personnel:liste_personnel' %}" class="btn-cancel">
                        <i class="fas fa-arrow-left"></i>
                        <span>Retour à la liste</span>
                    </a>
                    <button type="submit" class="btn-submit">
                        <i class="fas fa-save"></i>
                        <span>Ajouter le membre</span>
                    </button>
                </div>
            </form>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
