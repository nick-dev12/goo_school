<!DOCTYPE html>
{% load static %}
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Secrétaire - {{ etablissement.nom }}</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{% static 'school_admin/css/directeur/dashboard_secretaire.css' %}"
    />
    <link
      rel="stylesheet"
      href="{% static 'school_admin/css/partials/messages.css' %}"
    />
  </head>
  <body>
    <!-- Header -->
    {% include 'school_admin/directeur/secretaire/partials/header_secretaire.html' %}

    <!-- Main Content Container -->
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
          <div class="page-title-section">
            <h1 class="page-title">
              <i class="fas fa-tachometer-alt"></i>
              Tableau de Bord Secrétaire
            </h1>
            <p class="page-subtitle">
              Gestion de la scolarité - {{ etablissement.nom }}
            </p>
          </div>
          <div class="page-actions">
            <button class="btn-primary">
              <i class="fas fa-user-plus"></i>
              <span>Inscrire un élève</span>
            </button>
          </div>
        </div>

        <!-- Messages Django -->
        {% include 'school_admin/partials/messages.html' %}

        <!-- Statistiques principales -->
        <div class="stats-section">
          <div class="stats-grid">
            <div class="stat-card stat-primary">
              <div class="stat-icon">
                <i class="fas fa-user-graduate"></i>
              </div>
              <div class="stat-content">
                <div class="stat-number">{{ stats.total_eleves|default:0 }}</div>
                <div class="stat-label">Total Élèves</div>
                <div class="stat-change positive">
                  <i class="fas fa-arrow-up"></i>
                  +12% ce mois
                </div>
              </div>
            </div>
            <div class="stat-card stat-success">
              <div class="stat-icon">
                <i class="fas fa-user-plus"></i>
              </div>
              <div class="stat-content">
                <div class="stat-number">{{ stats.nouveaux_eleves|default:0 }}</div>
                <div class="stat-label">Nouveaux Inscrits</div>
                <div class="stat-change positive">
                  <i class="fas fa-arrow-up"></i>
                  +8 cette semaine
                </div>
              </div>
            </div>
            <div class="stat-card stat-warning">
              <div class="stat-icon">
                <i class="fas fa-chalkboard"></i>
              </div>
              <div class="stat-content">
                <div class="stat-number">{{ stats.total_classes|default:0 }}</div>
                <div class="stat-label">Classes Actives</div>
                <div class="stat-change neutral">
                  <i class="fas fa-minus"></i>
                  Stable
                </div>
              </div>
            </div>
            <div class="stat-card stat-info">
              <div class="stat-icon">
                <i class="fas fa-clipboard-check"></i>
              </div>
              <div class="stat-content">
                <div class="stat-number">{{ stats.evaluations_en_cours|default:0 }}</div>
                <div class="stat-label">Évaluations</div>
                <div class="stat-change positive">
                  <i class="fas fa-arrow-up"></i>
                  +3 cette semaine
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Contenu principal -->
        <div class="dashboard-content">
          <div class="dashboard-grid">
            <!-- Section Inscriptions récentes -->
            <div class="dashboard-card">
              <div class="card-header">
                <h3 class="card-title">
                  <i class="fas fa-user-plus"></i>
                  Inscriptions Récentes
                </h3>
                <a href="#" class="card-action">
                  Voir tout
                  <i class="fas fa-arrow-right"></i>
                </a>
              </div>
              <div class="card-content">
                <div class="recent-list">
                  <div class="recent-item">
                    <div class="recent-avatar">
                      <i class="fas fa-user"></i>
                    </div>
                    <div class="recent-info">
                      <div class="recent-name">Marie Dubois</div>
                      <div class="recent-details">6ème A - Inscrite il y a 2h</div>
                    </div>
                    <div class="recent-status status-pending">
                      <i class="fas fa-clock"></i>
                      En attente
                    </div>
                  </div>
                  <div class="recent-item">
                    <div class="recent-avatar">
                      <i class="fas fa-user"></i>
                    </div>
                    <div class="recent-info">
                      <div class="recent-name">Jean Martin</div>
                      <div class="recent-details">Terminale S - Inscrit hier</div>
                    </div>
                    <div class="recent-status status-completed">
                      <i class="fas fa-check"></i>
                      Validé
                    </div>
                  </div>
                  <div class="recent-item">
                    <div class="recent-avatar">
                      <i class="fas fa-user"></i>
                    </div>
                    <div class="recent-info">
                      <div class="recent-name">Sophie Leroy</div>
                      <div class="recent-details">3ème B - Inscrite il y a 3j</div>
                    </div>
                    <div class="recent-status status-completed">
                      <i class="fas fa-check"></i>
                      Validé
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Section Classes populaires -->
            <div class="dashboard-card">
              <div class="card-header">
                <h3 class="card-title">
                  <i class="fas fa-chalkboard"></i>
                  Classes les Plus Populaires
                </h3>
                <a href="#" class="card-action">
                  Gérer
                  <i class="fas fa-arrow-right"></i>
                </a>
              </div>
              <div class="card-content">
                <div class="class-list">
                  <div class="class-item">
                    <div class="class-info">
                      <div class="class-name">Terminale S</div>
                      <div class="class-level">Lycée</div>
                    </div>
                    <div class="class-stats">
                      <div class="class-occupation">
                        <div class="occupation-bar">
                          <div class="occupation-fill" style="width: 85%"></div>
                        </div>
                        <span class="occupation-text">17/20 élèves</span>
                      </div>
                    </div>
                  </div>
                  <div class="class-item">
                    <div class="class-info">
                      <div class="class-name">6ème A</div>
                      <div class="class-level">Collège</div>
                    </div>
                    <div class="class-stats">
                      <div class="class-occupation">
                        <div class="occupation-bar">
                          <div class="occupation-fill" style="width: 70%"></div>
                        </div>
                        <span class="occupation-text">21/30 élèves</span>
                      </div>
                    </div>
                  </div>
                  <div class="class-item">
                    <div class="class-info">
                      <div class="class-name">3ème B</div>
                      <div class="class-level">Collège</div>
                    </div>
                    <div class="class-stats">
                      <div class="class-occupation">
                        <div class="occupation-bar">
                          <div class="occupation-fill" style="width: 60%"></div>
                        </div>
                        <span class="occupation-text">18/30 élèves</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
           

            <!-- Section Activités récentes -->
            <div class="dashboard-card">
              <div class="card-header">
                <h3 class="card-title">
                  <i class="fas fa-history"></i>
                  Activités Récentes
                </h3>
                <a href="#" class="card-action">
                  Voir l'historique
                  <i class="fas fa-arrow-right"></i>
                </a>
              </div>
              <div class="card-content">
                <div class="activity-list">
                  <div class="activity-item">
                    <div class="activity-icon success">
                      <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="activity-content">
                      <div class="activity-title">Nouvelle inscription validée</div>
                      <div class="activity-meta">Marie Dubois - 6ème A</div>
                      <div class="activity-time">Il y a 2 heures</div>
                    </div>
                  </div>
                  <div class="activity-item">
                    <div class="activity-icon info">
                      <i class="fas fa-edit"></i>
                    </div>
                    <div class="activity-content">
                      <div class="activity-title">Modification des informations</div>
                      <div class="activity-meta">Classe 3ème B - Capacité mise à jour</div>
                      <div class="activity-time">Il y a 4 heures</div>
                    </div>
                  </div>
                  <div class="activity-item">
                    <div class="activity-icon warning">
                      <i class="fas fa-exclamation"></i>
                    </div>
                    <div class="activity-content">
                      <div class="activity-title">Inscription en attente</div>
                      <div class="activity-meta">Jean Martin - Documents manquants</div>
                      <div class="activity-time">Il y a 6 heures</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Actions rapides -->
        <div class="quick-actions">
          <h3 class="section-title">
            <i class="fas fa-bolt"></i>
            Actions Rapides
          </h3>
          <div class="actions-grid">
            <a href="#" class="action-card">
              <div class="action-icon neo-green">
                <i class="fas fa-user-plus"></i>
              </div>
              <div class="action-content">
                <h4>Inscrire un élève</h4>
                <p>Nouvelle inscription</p>
              </div>
            </a>
            <a href="#" class="action-card">
              <div class="action-icon neo-blue">
                <i class="fas fa-users"></i>
              </div>
              <div class="action-content">
                <h4>Liste des élèves</h4>
                <p>Gérer les élèves</p>
              </div>
            </a>
            <a href="#" class="action-card">
              <div class="action-icon neo-orange">
                <i class="fas fa-chalkboard"></i>
              </div>
              <div class="action-content">
                <h4>Gérer les classes</h4>
                <p>Organiser les classes</p>
              </div>
            </a>
            <a href="#" class="action-card">
              <div class="action-icon neo-purple">
                <i class="fas fa-file-alt"></i>
              </div>
              <div class="action-content">
                <h4>Bulletins</h4>
                <p>Générer les bulletins</p>
              </div>
            </a>
            <a href="#" class="action-card">
              <div class="action-icon neo-teal">
                <i class="fas fa-calendar-alt"></i>
              </div>
              <div class="action-content">
                <h4>Emploi du temps</h4>
                <p>Planifier les cours</p>
              </div>
            </a>
            <a href="#" class="action-card">
              <div class="action-icon neo-pink">
                <i class="fas fa-chart-line"></i>
              </div>
              <div class="action-content">
                <h4>Statistiques</h4>
                <p>Voir les rapports</p>
              </div>
            </a>
          </div>
        </div>
    </div>

    <!-- Scripts JavaScript -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Animation des compteurs
        const statNumbers = document.querySelectorAll('.stat-number');
        statNumbers.forEach(stat => {
          const finalValue = parseInt(stat.textContent);
          let currentValue = 0;
          const increment = Math.ceil(finalValue / 20);
          
          const timer = setInterval(() => {
            currentValue += increment;
            if (currentValue >= finalValue) {
              currentValue = finalValue;
              clearInterval(timer);
            }
            stat.textContent = currentValue;
          }, 50);
        });

        // Animation des cartes
        const cards = document.querySelectorAll('.dashboard-card, .action-card');
        cards.forEach((card, index) => {
          card.style.opacity = '0';
          card.style.transform = 'translateY(20px)';
          
          setTimeout(() => {
            card.style.transition = 'all 0.5s ease';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
          }, index * 100);
        });

        // Gestion des boutons d'action
        const actionButtons = document.querySelectorAll('.btn-sm, .action-card');
        actionButtons.forEach(btn => {
          btn.addEventListener('click', function(e) {
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
              this.style.transform = '';
            }, 150);
          });
        });
      });
    </script>
  </body>
</html>
